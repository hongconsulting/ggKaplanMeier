% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ggKaplanMeier.R
\name{ggKM}
\alias{ggKM}
\title{Kaplan–Meier plot}
\usage{
ggKM(
  time,
  status,
  group,
  breaks.s = seq(0, 1, 0.25),
  breaks.t = NULL,
  CI = 1,
  CI.alpha = 0.2,
  colors = (ggsci::pal_nejm())(8),
  grid.color = grDevices::rgb(0.95, 0.95, 0.95),
  grid.s = seq(0, 1, 0.25),
  grid.t = NULL,
  grid.width = 0.5,
  legend.direction = "vertical",
  legend.justification = "center",
  legend.label.position = "left",
  legend.labels = NULL,
  legend.ncol = NULL,
  legend.nrow = NULL,
  legend.position = c(0.9, 0.9),
  legend.text.align = 1,
  line.width = 0.5,
  line.height = 0.025,
  risk.table = TRUE,
  risk.table.proportion = 0.2,
  textsize.axis = 12,
  textsize.legend = 12,
  textsize.risk = 12,
  title.s = "Survival",
  title.t = "Time"
)
}
\arguments{
\item{time}{Numeric vector of follow-up times.}

\item{status}{Numeric event indicator (1 = event, 0 = censored).}

\item{group}{Integer vector grouping variable.}

\item{breaks.s}{Y-axis (survival) tick marks. Default = \code{seq(0, 1, 0.25)}.}

\item{breaks.t}{X-axis (time) tick marks. Default = \code{seq(0, max(time), by = 12)}.}

\item{CI}{Integer indicating the CI type (options 2 to 4 are via the \code{km.ci} package):
\itemize{
\item \code{0}: none
\item \code{1}: pointwise CI using Greenwood's variance¹ with complementary log–log transformation (default)
\item \code{2}: pointwise CI using Rothman's binomial method²
\item \code{3}: pointwise CI using Thomas–Grunkemeier likelihood-ratio method³
\item \code{4}: simultaneous confidence bands using Nair's equal precision method⁴ with log transformation
}}

\item{CI.alpha}{Alpha transparency of confidence intervals. Default = 0.2.}

\item{colors}{Vector of colors. Default = \code{ggsci::pal_nejm()(8)}.}

\item{grid.color}{Gridline color. Default = \code{rgb(0.95, 0.95, 0.95)}.}

\item{grid.s}{Horizontal gridline positions. Default = \code{seq(0, 1, 0.25)}.}

\item{grid.t}{Vertical gridline positions. Default = \code{NULL}.}

\item{grid.width}{Gridline thickness. Default = 0.5.}

\item{legend.direction}{Legend orientation; either "vertical" (default) or "horizontal".}

\item{legend.justification}{Alignment anchor for the legend relative to its
position. Can be a keyword pair such as \code{"left"}, \code{"center"}, \code{"right"},
\code{"top"}, \code{"bottom"}, or a numeric vector of length 2 giving relative
coordinates within the plot area. Default = "center"}

\item{legend.label.position}{Legend label position ("left" or "right") relative to the legend symbol. Default = "left".}

\item{legend.labels}{Character vector of group labels.}

\item{legend.ncol}{Integer specifying the number of columns in the legend
when \code{legend.direction = "vertical"}. Default = \code{NULL}.}

\item{legend.nrow}{Integer specifying the number of rows in the legend
when \code{legend.direction = "horizontal"}. Default = \code{NULL}.}

\item{legend.position}{Position of the legend. Can be a keyword such as
\code{"none"}, \code{"left"}, \code{"right"}, \code{"bottom"}, or \code{"top"}, or a numeric vector
of length 2 giving relative coordinates within the plot area. Default = \code{c(0.9, 0.9)}.}

\item{legend.text.align}{Legend text alignment: 0 = left, 0.5 = center, 1 = right. Default = 1.}

\item{line.width}{Line width survival curves and censor marks. Default = 0.5.}

\item{line.height}{Height of censor marks. Default = 0.025.}

\item{risk.table}{Logical; if \code{TRUE}, show risk table. Default = \code{TRUE}.}

\item{risk.table.proportion}{Relative height of the risk table. Default = 0.2.}

\item{textsize.axis}{Axis text size. Default = 12.}

\item{textsize.legend}{Legend text size. Default = 12.}

\item{textsize.risk}{Risk table text size. Default = 12.}

\item{title.s}{Y-axis (survival) title. Default = "Survival".}

\item{title.t}{X-axis (time) title. Default = "Time".}
}
\value{
A \code{ggplot2} object (or \code{patchwork} composite if \code{risk.table = TRUE}).
}
\description{
Generates a Kaplan–Meier plot with optional confidence intervals and risk table.
}
\examples{
data <- survival::lung
g <- ggKM(data$time * 12 / 365.2425, data$status - 1, data$sex,
          legend.labels = c("Male", "Female"),
          title.s = "Overall survival", title.t = "Time (months)")
print(g)
}
\references{
\enumerate{
\item Greenwood, M., 1926. A report on the natural duration of cancer. In:
\emph{Reports on Public Health and Medical Subjects}, 33, pp. 1–26. London:
Her Majesty’s Stationery Office, Ministry of Health.
\item Rothman, K.J., 1978. Estimation of confidence limits for the cumulative
probability of survival in life table analysis. \emph{Journal of Chronic
Diseases}, 31(8), pp. 557–560.
\item Thomas, D.R. and Grunkemeier, G.L., 1975. Confidence interval estimation
of survival probabilities for censored data. \emph{Journal of the American
Statistical Association}, 70(352), pp. 865–871.
\item Nair, V.N., 1984. Conﬁdence bands for survival functions with censored
data: a comparative study. \emph{Technometrics}, 26, pp. 265–275.
}
}
